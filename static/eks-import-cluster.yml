AWSTemplateFormatVersion: '2010-09-09'
Description: Blueprints tracking (qs-1s1r465hk)
Resources:
  eksBlueprintvpc72D8398C:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: 10.0.0.0/16
      EnableDnsHostnames: true
      EnableDnsSupport: true
      InstanceTenancy: default
      Tags:
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/Resource
  eksBlueprintvpcPublicSubnet1Subnet49FFF8AE:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      AvailabilityZone:
        Fn::Select:
          - 0
          - Fn::GetAZs: ""
      CidrBlock: 10.0.0.0/18
      MapPublicIpOnLaunch: true
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Public
        - Key: aws-cdk:subnet-type
          Value: Public
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet1
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet1/Subnet
  eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9:
    Type: AWS::EC2::RouteTable
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      Tags:
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet1
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet1/RouteTable
  eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      SubnetId:
        Ref: eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet1/RouteTableAssociation
  eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B:
    Type: AWS::EC2::Route
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId:
        Ref: eksBlueprintvpcIGWDFF1233C
    DependsOn:
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet1/DefaultRoute
  eksBlueprintvpcPublicSubnet1EIP9981D9AF:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
      Tags:
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet1
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet1/EIP
  eksBlueprintvpcPublicSubnet1NATGatewayC854E240:
    Type: AWS::EC2::NatGateway
    Properties:
      SubnetId:
        Ref: eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      AllocationId:
        Fn::GetAtt:
          - eksBlueprintvpcPublicSubnet1EIP9981D9AF
          - AllocationId
      Tags:
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet1
    DependsOn:
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet1/NATGateway
  eksBlueprintvpcPublicSubnet2Subnet4192D4D3:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      AvailabilityZone:
        Fn::Select:
          - 1
          - Fn::GetAZs: ""
      CidrBlock: 10.0.64.0/18
      MapPublicIpOnLaunch: true
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Public
        - Key: aws-cdk:subnet-type
          Value: Public
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet2
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet2/Subnet
  eksBlueprintvpcPublicSubnet2RouteTable1A18E938:
    Type: AWS::EC2::RouteTable
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      Tags:
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet2
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet2/RouteTable
  eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      SubnetId:
        Ref: eksBlueprintvpcPublicSubnet2Subnet4192D4D3
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet2/RouteTableAssociation
  eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A:
    Type: AWS::EC2::Route
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId:
        Ref: eksBlueprintvpcIGWDFF1233C
    DependsOn:
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet2/DefaultRoute
  eksBlueprintvpcPublicSubnet2EIP52897939:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
      Tags:
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet2
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet2/EIP
  eksBlueprintvpcPublicSubnet2NATGateway530AE846:
    Type: AWS::EC2::NatGateway
    Properties:
      SubnetId:
        Ref: eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      AllocationId:
        Fn::GetAtt:
          - eksBlueprintvpcPublicSubnet2EIP52897939
          - AllocationId
      Tags:
        - Key: kubernetes.io/role/elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PublicSubnet2
    DependsOn:
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PublicSubnet2/NATGateway
  eksBlueprintvpcPrivateSubnet1SubnetD3B17A75:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      AvailabilityZone:
        Fn::Select:
          - 0
          - Fn::GetAZs: ""
      CidrBlock: 10.0.128.0/18
      MapPublicIpOnLaunch: false
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Private
        - Key: aws-cdk:subnet-type
          Value: Private
        - Key: kubernetes.io/role/internal-elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PrivateSubnet1
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet1/Subnet
  eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E:
    Type: AWS::EC2::RouteTable
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      Tags:
        - Key: kubernetes.io/role/internal-elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PrivateSubnet1
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet1/RouteTable
  eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      SubnetId:
        Ref: eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet1/RouteTableAssociation
  eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE:
    Type: AWS::EC2::Route
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      DestinationCidrBlock: 0.0.0.0/0
      NatGatewayId:
        Ref: eksBlueprintvpcPublicSubnet1NATGatewayC854E240
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet1/DefaultRoute
  eksBlueprintvpcPrivateSubnet2SubnetB63BCC50:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      AvailabilityZone:
        Fn::Select:
          - 1
          - Fn::GetAZs: ""
      CidrBlock: 10.0.192.0/18
      MapPublicIpOnLaunch: false
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Private
        - Key: aws-cdk:subnet-type
          Value: Private
        - Key: kubernetes.io/role/internal-elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PrivateSubnet2
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet2/Subnet
  eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA:
    Type: AWS::EC2::RouteTable
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      Tags:
        - Key: kubernetes.io/role/internal-elb
          Value: "1"
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc/PrivateSubnet2
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet2/RouteTable
  eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      SubnetId:
        Ref: eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet2/RouteTableAssociation
  eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5:
    Type: AWS::EC2::Route
    Properties:
      RouteTableId:
        Ref: eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      DestinationCidrBlock: 0.0.0.0/0
      NatGatewayId:
        Ref: eksBlueprintvpcPublicSubnet2NATGateway530AE846
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/PrivateSubnet2/DefaultRoute
  eksBlueprintvpcIGWDFF1233C:
    Type: AWS::EC2::InternetGateway
    Properties:
      Tags:
        - Key: Name
          Value: eksBlueprint/eksBlueprint-vpc
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/IGW
  eksBlueprintvpcVPCGWB2E91E26:
    Type: AWS::EC2::VPCGatewayAttachment
    Properties:
      VpcId:
        Ref: eksBlueprintvpc72D8398C
      InternetGatewayId:
        Ref: eksBlueprintvpcIGWDFF1233C
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-vpc/VPCGW
  eksBlueprintdefaultKmsKey7136975B:
    Type: AWS::KMS::Key
    Properties:
      KeyPolicy:
        Statement:
          - Action: kms:*
            Effect: Allow
            Principal:
              AWS:
                Fn::Join:
                  - ""
                  - - "arn:aws:iam::"
                    - Ref: AWS::AccountId
                    - :root
            Resource: "*"
        Version: "2012-10-17"
      Description: Key for EKS Cluster 'eksBlueprint'
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint-default-KmsKey/Resource
  kubectllayer24CDE9E540:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1
        S3Key: c475180f5b1bbabac165414da13a9b843b111cd3b6d5fae9c954c006640c4064.zip
      Description: /opt/kubectl/kubectl 1.24; /opt/helm/helm 3.9
      LicenseInfo: Apache-2.0
    Metadata:
      aws:cdk:path: eksBlueprint/kubectllayer24/Resource
      aws:asset:path: asset.c475180f5b1bbabac165414da13a9b843b111cd3b6d5fae9c954c006640c4064.zip
      aws:asset:is-bundled: false
      aws:asset:property: Content
  eksBlueprintRoleE124DE9C:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: eks.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonEKSClusterPolicy
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/Role/Resource
  eksBlueprintControlPlaneSecurityGroup28C05A54:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: EKS Control Plane Security Group
      SecurityGroupEgress:
        - CidrIp: 0.0.0.0/0
          Description: Allow all outbound traffic by default
          IpProtocol: "-1"
      VpcId:
        Ref: eksBlueprintvpc72D8398C
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/ControlPlaneSecurityGroup/Resource
  eksBlueprintCreationRole8A7AF92E:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              AWS:
                Fn::Join:
                  - ""
                  - - "arn:aws:iam::"
                    - Ref: AWS::AccountId
                    - :root
        Version: "2012-10-17"
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/Resource/CreationRole/Resource
  eksBlueprintCreationRoleDefaultPolicyC84FF101:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: iam:PassRole
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - eksBlueprintRoleE124DE9C
                - Arn
          - Action:
              - eks:CreateCluster
              - eks:CreateFargateProfile
              - eks:DeleteCluster
              - eks:DescribeCluster
              - eks:DescribeUpdate
              - eks:TagResource
              - eks:UntagResource
              - eks:UpdateClusterConfig
              - eks:UpdateClusterVersion
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:aws:eks:us-east-1:"
                    - Ref: AWS::AccountId
                    - :cluster/eksBlueprint
              - Fn::Join:
                  - ""
                  - - "arn:aws:eks:us-east-1:"
                    - Ref: AWS::AccountId
                    - :cluster/eksBlueprint/*
          - Action:
              - eks:DeleteFargateProfile
              - eks:DescribeFargateProfile
            Effect: Allow
            Resource:
              Fn::Join:
                - ""
                - - "arn:aws:eks:us-east-1:"
                  - Ref: AWS::AccountId
                  - :fargateprofile/eksBlueprint/*
          - Action:
              - ec2:DescribeDhcpOptions
              - ec2:DescribeInstances
              - ec2:DescribeNetworkInterfaces
              - ec2:DescribeRouteTables
              - ec2:DescribeSecurityGroups
              - ec2:DescribeSubnets
              - ec2:DescribeVpcs
              - iam:CreateServiceLinkedRole
              - iam:GetRole
              - iam:listAttachedRolePolicies
            Effect: Allow
            Resource: "*"
          - Action:
              - kms:CreateGrant
              - kms:Decrypt
              - kms:DescribeKey
              - kms:Encrypt
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - eksBlueprintdefaultKmsKey7136975B
                - Arn
        Version: "2012-10-17"
      PolicyName: eksBlueprintCreationRoleDefaultPolicyC84FF101
      Roles:
        - Ref: eksBlueprintCreationRole8A7AF92E
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/Resource/CreationRole/DefaultPolicy/Resource
  eksBlueprint4E5C9E06:
    Type: Custom::AWSCDK-EKS-Cluster
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - awscdkawseksClusterResourceProviderNestedStackawscdkawseksClusterResourceProviderNestedStackResource9827C454
          - Outputs.eksBlueprintawscdkawseksClusterResourceProviderframeworkonEvent7378F23FArn
      Config:
        name: eksBlueprint
        version: "1.25"
        roleArn:
          Fn::GetAtt:
            - eksBlueprintRoleE124DE9C
            - Arn
        encryptionConfig:
          - provider:
              keyArn:
                Fn::GetAtt:
                  - eksBlueprintdefaultKmsKey7136975B
                  - Arn
            resources:
              - secrets
        resourcesVpcConfig:
          subnetIds:
            - Ref: eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
            - Ref: eksBlueprintvpcPublicSubnet2Subnet4192D4D3
            - Ref: eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
            - Ref: eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
          securityGroupIds:
            - Fn::GetAtt:
                - eksBlueprintControlPlaneSecurityGroup28C05A54
                - GroupId
          endpointPublicAccess: true
          endpointPrivateAccess: true
      AssumeRoleArn:
        Fn::GetAtt:
          - eksBlueprintCreationRole8A7AF92E
          - Arn
      AttributesRevision: 2
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - eksBlueprintCreationRoleDefaultPolicyC84FF101
      - eksBlueprintCreationRole8A7AF92E
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/Resource/Resource/Default
  eksBlueprintKubectlReadyBarrier7A840E4A:
    Type: AWS::SSM::Parameter
    Properties:
      Type: String
      Value: aws:cdk:eks:kubectl-ready
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - eksBlueprintCreationRoleDefaultPolicyC84FF101
      - eksBlueprintCreationRole8A7AF92E
      - eksBlueprint4E5C9E06
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/KubectlReadyBarrier
  eksBlueprintMastersRole8E03A06A:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              AWS:
                Fn::Join:
                  - ""
                  - - "arn:aws:iam::"
                    - Ref: AWS::AccountId
                    - :root
        Version: "2012-10-17"
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/MastersRole/Resource
  eksBlueprintAwsAuthmanifestC4DC14B5:
    Type: Custom::AWSCDK-EKS-KubernetesResource
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B
          - Outputs.eksBlueprintawscdkawseksKubectlProviderframeworkonEvent3815466EArn
      Manifest:
        Fn::Join:
          - ""
          - - '[{"apiVersion":"v1","kind":"ConfigMap","metadata":{"name":"aws-auth","namespace":"kube-system","labels":{"aws.cdk.eks/prune-c8e77097f24dbebd9f2e5e99ad5537b499a1aaf9f3":""}},"data":{"mapRoles":"[{\"rolearn\":\"'
            - Fn::GetAtt:
                - eksBlueprintMastersRole8E03A06A
                - Arn
            - \",\"username\":\"
            - Fn::GetAtt:
                - eksBlueprintMastersRole8E03A06A
                - Arn
            - \",\"groups\":[\"system:masters\"]},{\"rolearn\":\"
            - Fn::GetAtt:
                - eksBlueprintNodegroupNodeGrp1ngNodeGroupRole173AC102
                - Arn
            - \",\"username\":\"system:node:{{EC2PrivateDNSName}}\",\"groups\":[\"system:bootstrappers\",\"system:nodes\"]}]","mapUsers":"[]","mapAccounts":"[]"}}]
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      RoleArn:
        Fn::GetAtt:
          - eksBlueprintCreationRole8A7AF92E
          - Arn
      PruneLabel: aws.cdk.eks/prune-c8e77097f24dbebd9f2e5e99ad5537b499a1aaf9f3
      Overwrite: true
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - eksBlueprintKubectlReadyBarrier7A840E4A
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/AwsAuth/manifest/Resource/Default
  eksBlueprintNodegroupNodeGrp1ngNodeGroupRole173AC102:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: ec2.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonEKSWorkerNodePolicy
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonEKS_CNI_Policy
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonEC2ContainerRegistryReadOnly
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - vpccniaddOn
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/NodegroupNodeGrp-1-ng/NodeGroupRole/Resource
  eksBlueprintNodegroupNodeGrp1ngD7465FEB:
    Type: AWS::EKS::Nodegroup
    Properties:
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      NodeRole:
        Fn::GetAtt:
          - eksBlueprintNodegroupNodeGrp1ngNodeGroupRole173AC102
          - Arn
      Subnets:
        - Ref: eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
        - Ref: eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      AmiType: AL2_x86_64
      CapacityType: ON_DEMAND
      DiskSize: 25
      ForceUpdateEnabled: true
      InstanceTypes:
        - t3.medium
      NodegroupName: NodeGrp-1
      ScalingConfig:
        DesiredSize: 3
        MaxSize: 4
        MinSize: 3
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - vpccniaddOn
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/NodegroupNodeGrp-1-ng/Resource
  eksBlueprintmemorydbchartsaConditionJsonBA57DA2D:
    Type: Custom::AWSCDKCfnJson
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - AWSCDKCfnUtilsProviderCustomResourceProviderHandlerCF82AA57
          - Arn
      Value:
        Fn::Join:
          - ""
          - - '{"'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - :oidc-provider/
                    - Ref: eksBlueprintOpenIdConnectProvider029BC353
            - :aud":"sts.amazonaws.com","
            - Fn::Select:
                - 1
                - Fn::Split:
                    - :oidc-provider/
                    - Ref: eksBlueprintOpenIdConnectProvider029BC353
            - :sub":"system:serviceaccount:ack-system:memorydb-chart"}
    DependsOn:
      - acksystemnamespacestruct7A808AFA
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/memorydb-chart-sa/ConditionJson/Resource/Default
  eksBlueprintmemorydbchartsaRoleEC806D97:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRoleWithWebIdentity
            Condition:
              StringEquals:
                Fn::GetAtt:
                  - eksBlueprintmemorydbchartsaConditionJsonBA57DA2D
                  - Value
            Effect: Allow
            Principal:
              Federated:
                Ref: eksBlueprintOpenIdConnectProvider029BC353
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonMemoryDBFullAccess
    DependsOn:
      - acksystemnamespacestruct7A808AFA
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/memorydb-chart-sa/Role/Resource
  eksBlueprintmemorydbchartsamanifestmemorydbchartsaServiceAccountResourceACD58319:
    Type: Custom::AWSCDK-EKS-KubernetesResource
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B
          - Outputs.eksBlueprintawscdkawseksKubectlProviderframeworkonEvent3815466EArn
      Manifest:
        Fn::Join:
          - ""
          - - '[{"apiVersion":"v1","kind":"ServiceAccount","metadata":{"name":"memorydb-chart","namespace":"ack-system","labels":{"aws.cdk.eks/prune-c870fa38aa749fcf51320a715c176bc7c7f273f0fc":"","app.kubernetes.io/name":"memorydb-chart"},"annotations":{"eks.amazonaws.com/role-arn":"'
            - Fn::GetAtt:
                - eksBlueprintmemorydbchartsaRoleEC806D97
                - Arn
            - '"}}}]'
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      RoleArn:
        Fn::GetAtt:
          - eksBlueprintCreationRole8A7AF92E
          - Arn
      PruneLabel: aws.cdk.eks/prune-c870fa38aa749fcf51320a715c176bc7c7f273f0fc
    DependsOn:
      - acksystemnamespacestruct7A808AFA
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - eksBlueprintKubectlReadyBarrier7A840E4A
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/memorydb-chart-sa/manifest-memorydb-chart-saServiceAccountResource/Resource/Default
  eksBlueprintOpenIdConnectProvider029BC353:
    Type: Custom::AWSCDKOpenIdConnectProvider
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomAWSCDKOpenIdConnectProviderCustomResourceProviderHandlerF2C543E0
          - Arn
      ClientIDList:
        - sts.amazonaws.com
      Url:
        Fn::GetAtt:
          - eksBlueprint4E5C9E06
          - OpenIdConnectIssuerUrl
      CodeHash: 48e9fd6cee1d2c5f41da5c382b67d28876e6930ade034bffcfe0739f878fec68
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/OpenIdConnectProvider/Resource/Default
  eksBlueprintchartmemorydbchartA27C09CE:
    Type: Custom::AWSCDK-EKS-HelmChart
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B
          - Outputs.eksBlueprintawscdkawseksKubectlProviderframeworkonEvent3815466EArn
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      RoleArn:
        Fn::GetAtt:
          - eksBlueprintCreationRole8A7AF92E
          - Arn
      Release: memorydb-chart
      Chart: memorydb-chart
      Version: v0.0.12
      Values: '{"aws":{"region":"us-east-1"},"serviceAccount":{"create":false,"name":"memorydb-chart"}}'
      Namespace: ack-system
      Repository: oci://public.ecr.aws/aws-controllers-k8s/memorydb-chart
      CreateNamespace: true
    DependsOn:
      - eksBlueprintvpcIGWDFF1233C
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTable78D3D57E
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTable4CDF78EA
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
      - eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
      - eksBlueprintvpcPublicSubnet1DefaultRoute3F51D26B
      - eksBlueprintvpcPublicSubnet1EIP9981D9AF
      - eksBlueprintvpcPublicSubnet1NATGatewayC854E240
      - eksBlueprintvpcPublicSubnet1RouteTableAAA4E0A9
      - eksBlueprintvpcPublicSubnet1RouteTableAssociation514F0965
      - eksBlueprintvpcPublicSubnet1Subnet49FFF8AE
      - eksBlueprintvpcPublicSubnet2DefaultRoute9ED8AB2A
      - eksBlueprintvpcPublicSubnet2EIP52897939
      - eksBlueprintvpcPublicSubnet2NATGateway530AE846
      - eksBlueprintvpcPublicSubnet2RouteTable1A18E938
      - eksBlueprintvpcPublicSubnet2RouteTableAssociation13AFE0AD
      - eksBlueprintvpcPublicSubnet2Subnet4192D4D3
      - eksBlueprintvpc72D8398C
      - eksBlueprintvpcVPCGWB2E91E26
      - eksBlueprintKubectlReadyBarrier7A840E4A
      - eksBlueprintmemorydbchartsaConditionJsonBA57DA2D
      - eksBlueprintmemorydbchartsamanifestmemorydbchartsaServiceAccountResourceACD58319
      - eksBlueprintmemorydbchartsaRoleEC806D97
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/eksBlueprint/chart-memorydb-chart/Resource/Default
  awscdkawseksClusterResourceProviderNestedStackawscdkawseksClusterResourceProviderNestedStackResource9827C454:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL:
        Fn::Join:
          - ""
          - - https://s3.us-east-1.
            - Ref: AWS::URLSuffix
            - /
            - Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1
            - /df78ea37c651f1860f06cec84722f16f9678bbe12d420d5f4e6c7baf71f369d1.json
      Parameters:
        referencetoeksBlueprintCreationRoleCBDF34F3Arn:
          Fn::GetAtt:
            - eksBlueprintCreationRole8A7AF92E
            - Arn
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/@aws-cdk--aws-eks.ClusterResourceProvider.NestedStack/@aws-cdk--aws-eks.ClusterResourceProvider.NestedStackResource
      aws:asset:path: eksBlueprintawscdkawseksClusterResourceProvider3775BDC7.nested.template.json
      aws:asset:property: TemplateURL
  awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL:
        Fn::Join:
          - ""
          - - https://s3.us-east-1.
            - Ref: AWS::URLSuffix
            - /
            - Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1
            - /315418ba26cb5ccfbb424f4016163cc851caf01ea5f89175607f693879b92656.json
      Parameters:
        referencetoeksBlueprint49F46952Arn:
          Fn::GetAtt:
            - eksBlueprint4E5C9E06
            - Arn
        referencetoeksBlueprintCreationRoleCBDF34F3Arn:
          Fn::GetAtt:
            - eksBlueprintCreationRole8A7AF92E
            - Arn
        referencetoeksBlueprintkubectllayer246C58D576Ref:
          Ref: kubectllayer24CDE9E540
        referencetoeksBlueprinteksBlueprintvpcPrivateSubnet1Subnet1AB50D33Ref:
          Ref: eksBlueprintvpcPrivateSubnet1SubnetD3B17A75
        referencetoeksBlueprinteksBlueprintvpcPrivateSubnet2SubnetB5C2101FRef:
          Ref: eksBlueprintvpcPrivateSubnet2SubnetB63BCC50
        referencetoeksBlueprint49F46952ClusterSecurityGroupId:
          Fn::GetAtt:
            - eksBlueprint4E5C9E06
            - ClusterSecurityGroupId
    DependsOn:
      - eksBlueprintvpcPrivateSubnet1DefaultRouteC4F0ABEE
      - eksBlueprintvpcPrivateSubnet1RouteTableAssociation6DE32C78
      - eksBlueprintvpcPrivateSubnet2DefaultRoute989010F5
      - eksBlueprintvpcPrivateSubnet2RouteTableAssociation39D33AE0
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/@aws-cdk--aws-eks.KubectlProvider.NestedStack/@aws-cdk--aws-eks.KubectlProvider.NestedStackResource
      aws:asset:path: eksBlueprintawscdkawseksKubectlProvider78821010.nested.template.json
      aws:asset:property: TemplateURL
  CustomAWSCDKOpenIdConnectProviderCustomResourceProviderRole517FED65:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
      ManagedPolicyArns:
        - Fn::Sub: arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Policies:
        - PolicyName: Inline
          PolicyDocument:
            Version: "2012-10-17"
            Statement:
              - Effect: Allow
                Resource: "*"
                Action:
                  - iam:CreateOpenIDConnectProvider
                  - iam:DeleteOpenIDConnectProvider
                  - iam:UpdateOpenIDConnectProviderThumbprint
                  - iam:AddClientIDToOpenIDConnectProvider
                  - iam:RemoveClientIDFromOpenIDConnectProvider
    Metadata:
      aws:cdk:path: eksBlueprint/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Role
  CustomAWSCDKOpenIdConnectProviderCustomResourceProviderHandlerF2C543E0:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1
        S3Key: 48e9fd6cee1d2c5f41da5c382b67d28876e6930ade034bffcfe0739f878fec68.zip
      Timeout: 900
      MemorySize: 128
      Handler: __entrypoint__.handler
      Role:
        Fn::GetAtt:
          - CustomAWSCDKOpenIdConnectProviderCustomResourceProviderRole517FED65
          - Arn
      Runtime: nodejs16.x
    DependsOn:
      - CustomAWSCDKOpenIdConnectProviderCustomResourceProviderRole517FED65
    Metadata:
      aws:cdk:path: eksBlueprint/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Handler
      aws:asset:path: asset.48e9fd6cee1d2c5f41da5c382b67d28876e6930ade034bffcfe0739f878fec68
      aws:asset:property: Code
  AWSCDKCfnUtilsProviderCustomResourceProviderRoleFE0EE867:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
      ManagedPolicyArns:
        - Fn::Sub: arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: eksBlueprint/AWSCDKCfnUtilsProviderCustomResourceProvider/Role
  AWSCDKCfnUtilsProviderCustomResourceProviderHandlerCF82AA57:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1
        S3Key: 28739348edff6f1084f6a50d8d934e2d3fc2a3bb77442d8a9a1361d51ccd03c0.zip
      Timeout: 900
      MemorySize: 128
      Handler: __entrypoint__.handler
      Role:
        Fn::GetAtt:
          - AWSCDKCfnUtilsProviderCustomResourceProviderRoleFE0EE867
          - Arn
      Runtime: nodejs14.x
    DependsOn:
      - AWSCDKCfnUtilsProviderCustomResourceProviderRoleFE0EE867
    Metadata:
      aws:cdk:path: eksBlueprint/AWSCDKCfnUtilsProviderCustomResourceProvider/Handler
      aws:asset:path: asset.28739348edff6f1084f6a50d8d934e2d3fc2a3bb77442d8a9a1361d51ccd03c0
      aws:asset:property: Code
  acksystemnamespacestruct7A808AFA:
    Type: Custom::AWSCDK-EKS-KubernetesResource
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B
          - Outputs.eksBlueprintawscdkawseksKubectlProviderframeworkonEvent3815466EArn
      Manifest: '[{"apiVersion":"v1","kind":"Namespace","metadata":{"name":"ack-system","labels":{"aws.cdk.eks/prune-c87e8814d756842db0f4e6c74f77068c148d324387":""}}}]'
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      RoleArn:
        Fn::GetAtt:
          - eksBlueprintCreationRole8A7AF92E
          - Arn
      PruneLabel: aws.cdk.eks/prune-c87e8814d756842db0f4e6c74f77068c148d324387
      Overwrite: true
    DependsOn:
      - eksBlueprintKubectlReadyBarrier7A840E4A
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: eksBlueprint/ack-system-namespace-struct/Resource/Default
  vpccniaddOn:
    Type: AWS::EKS::Addon
    Properties:
      AddonName: vpc-cni
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      AddonVersion: v1.12.5-eksbuild.2
      ConfigurationValues: '{"env":{}}'
      ResolveConflicts: OVERWRITE
    Metadata:
      aws:cdk:path: eksBlueprint/vpc-cni-addOn
  kubeproxyaddOn:
    Type: AWS::EKS::Addon
    Properties:
      AddonName: kube-proxy
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      AddonVersion: v1.24.10-eksbuild.2
      ResolveConflicts: OVERWRITE
    Metadata:
      aws:cdk:path: eksBlueprint/kube-proxy-addOn
  corednsaddOn:
    Type: AWS::EKS::Addon
    Properties:
      AddonName: coredns
      ClusterName:
        Ref: eksBlueprint4E5C9E06
      AddonVersion: v1.9.3-eksbuild.2
      ResolveConflicts: OVERWRITE
    Metadata:
      aws:cdk:path: eksBlueprint/coredns-addOn
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/1VSwW7bMAz9ltxltfFabMe6xtBl6VojKXItZJlNVNtSIFIOAsP/Plpu6vb0HimKenxUKvufqbxeqBMmuqqTxpSy35LSteDUaw86lf3uqEX+ZndFLopQNkZvQ2mBxtzMNi4QvKiygTk/5zJEp40i4+xn8Uh+r4oRnhQ9KIKTOovCm47p3HhlCTzzS8Gk5CPKiLUeWrAktqCDN3R+8C4co4aviUHULcp+DbEBwyDwx6tCBEKZjcCxvA+6BrpXCKJRbVkpycWP6gx+Bx5H8VBzl7wJyKJEdsIs0EGsQxklAv5T1rwBknhyFewvSuZgC74zGjKtXWDNz0ewqyp31oKmwrvOVNz2DzRtflA+jp9VlbODMKqV/cZN7kYsHG8iTjOxYRAbQBe8BhEH4jXujd2LnMW69vNsvP+FPwc6hvjSX5yWM63/+62LtkFcy+Vturj7+DBXk01JM3qU1OyDpibp0hu5nvguvYn+DcKyCfIdr7rlL7lM5XLxjsYknm0wLcjNhP8Bf8WckJACAAA=
    Metadata:
      aws:cdk:path: eksBlueprint/CDKMetadata/Default
Outputs:
  eksBlueprintClusterName27B41C76:
    Value:
      Ref: eksBlueprint4E5C9E06
  eksBlueprintConfigCommandD610BBC2:
    Value:
      Fn::Join:
        - ""
        - - "aws eks update-kubeconfig --name "
          - Ref: eksBlueprint4E5C9E06
          - " --region us-east-1 --role-arn "
          - Fn::GetAtt:
              - eksBlueprintMastersRole8E03A06A
              - Arn
  eksBlueprintGetTokenCommand1F1590F6:
    Value:
      Fn::Join:
        - ""
        - - "aws eks get-token --cluster-name "
          - Ref: eksBlueprint4E5C9E06
          - " --region us-east-1 --role-arn "
          - Fn::GetAtt:
              - eksBlueprintMastersRole8E03A06A
              - Arn
Parameters:
  BootstrapVersion:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /cdk-bootstrap/hnb659fds/version
    Description: Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]
Rules:
  CheckBootstrapVersion:
    Assertions:
      - Assert:
          Fn::Not:
            - Fn::Contains:
                - - "1"
                  - "2"
                  - "3"
                  - "4"
                  - "5"
                - Ref: BootstrapVersion
        AssertDescription: CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.

